{"componentChunkName":"component---src-templates-blog-post-js","path":"/http/","result":{"data":{"site":{"siteMetadata":{"title":"Gatsby Blog"}},"markdownRemark":{"id":"d521b323-da89-5f25-b6be-db70e9a28458","excerpt":"HTTP协议简介 1、HTTP协议是Hyper Text Transfer Protocol（超文本传输协议）的缩写,是用于从万维网（WWW:World Wide Web ）服务器传输超文本到本地浏览器的传送协议。 2、HTTP是一个基于TCP/IP通信协议来传递数据（HTML 文件, 图片文件, 查询结果等）。…","html":"<h2>HTTP协议简介</h2>\n<p>1、HTTP协议是Hyper Text Transfer Protocol（超文本传输协议）的缩写,是用于从万维网（WWW:World Wide Web ）服务器传输超文本到本地浏览器的传送协议。</p>\n<p>2、HTTP是一个基于TCP/IP通信协议来传递数据（HTML 文件, 图片文件, 查询结果等）。</p>\n<p>3、HTTP是一个属于应用层的面向对象的协议。</p>\n<p>4、HTTP协议工作于客户端-服务端架构为上。浏览器作为HTTP客户端通过URL向HTTP服务端即WEB服务器发送所有请求。Web服务器根据接收到的请求后，向客户端发送响应信息。</p>\n<h2>主要特点</h2>\n<p>1、简单快速：客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有GET、HEAD、POST。每种方法规定了客户与服务器联系的类型不同。由于HTTP协议简单，使得HTTP服务器的程序规模小，因而通信速度很快。</p>\n<p>2、灵活：HTTP允许传输任意类型的数据对象。正在传输的类型由Content-Type加以标记。</p>\n<p>3、无连接：无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。</p>\n<p>4、无状态：HTTP协议是无状态协议。</p>\n<p>5、支持B/S及C/S模式。</p>\n<h2>HTTP之URL</h2>\n<p>HTTP使用统一资源标识符（Uniform Resource Identifiers, URI）来传输数据和建立连接。\nURL,全称是UniformResourceLocator, 是一种特殊类型的URI，包含了用于查找某个资源的足够的信息。一个完整的url包含以下几个部分：</p>\n<ol>\n<li>\n<p>协议部分：该URL的协议部分为“http：”，这代表网页使用的是HTTP协议。在Internet中可以使用多种协议，如HTTP，FTP等等本例中使用的是HTTP协议。在”HTTP”后面的“//”为分隔符</p>\n</li>\n<li>\n<p>域名部分：一个URL中，也可以使用IP地址作为域名使用</p>\n</li>\n<li>\n<p>端口部分：跟在域名后面的是端口，域名和端口之间使用“:”作为分隔符。端口不是一个URL必须的部分，如果省略端口部分，将采用默认端口</p>\n</li>\n<li>\n<p>虚拟目录部分：从域名后的第一个“/”开始到最后一个“/”为止，是虚拟目录部分。虚拟目录也不是一个URL必须的部分。</p>\n</li>\n<li>\n<p>文件名部分：从域名后的最后一个“/”开始到“？”为止，是文件名部分，如果没有“?”,则是从域名后的最后一个“/”开始到“#”为止，是文件部分，如果没有“？”和“#”，那么从域名后的最后一个“/”开始到结束，都是文件名部分。文件名部分也不是一个URL必须的部分，如果省略该部分，则使用默认的文件名</p>\n</li>\n<li>\n<p>锚部分：从“#”开始到最后，都是锚部分。锚部分也不是一个URL必须的部分</p>\n</li>\n<li>\n<p>参数部分：从“？”开始到“#”为止之间的部分为参数部分，又称搜索部分、查询部分。参数可以允许有多个参数，参数与参数之间用“&#x26;”作为分隔符。</p>\n</li>\n</ol>\n<h2>HTTP之请求消息Request</h2>\n<p>客户端发送一个HTTP请求到服务器的请求消息包括以下格式：</p>\n<p>请求行（request line）、请求头部（header）、空行和请求数据四个部分组成。\nGet请求例子：</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    GET /562f25980001b1b106000338.jpg HTTP/1.1\n    Host    img.mukewang.com\n    User-Agent    Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.106 Safari/537.36\n    Accept    image/webp,image/*,*/*;q=0.8\n    Referer    http://www.imooc.com/\n    Accept-Encoding    gzip, deflate, sdch\n    Accept-Language    zh-CN,zh;q=0.8</code></pre></div>\n<p>HTTP/1.0 版的主要缺点是，每个TCP连接只能发送一个请求。发送数据完毕，连接就关闭，如果还要请求其他资源，就必须再新建一个连接。</p>\n<p>TCP连接的新建成本很高，因为需要客户端和服务器三次握手，并且开始时发送速率较慢（slow start）。所以，HTTP 1.0版本的性能比较差。随着网页加载的外部资源越来越多，这个问题就愈发突出了。</p>\n<p>为了解决这个问题，有些浏览器在请求时，用了一个非标准的Connection字段。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    Connection: keep-alive</code></pre></div>\n<p>这个字段要求服务器不要关闭TCP连接，以便其他请求复用。服务器同样回应这个字段。\n客户端和服务器发现对方一段时间没有活动，就可以主动关闭连接。不过，规范的做法是，客户端在最后一个请求时，发送Connection: close，明确要求服务器关闭TCP连接。</p>\n<h2>HTTP之响应消息Response</h2>\n<p>一般情况下，服务器接收并处理客户端发过来的请求后会返回一个HTTP的响应消息。</p>\n<p>HTTP响应也由四个部分组成，分别是：状态行、消息报头、空行和响应正文。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    HTTP/1.0 200 OK \n    Content-Type: text/plain\n    Content-Length: 137582\n    Expires: Thu, 05 Dec 1997 16:00:00 GMT\n    Last-Modified: Wed, 5 August 1996 15:55:28 GMT\n    Server: Apache 0.84\n\n    &lt;html>\n    &lt;body>Hello World&lt;/body>\n    &lt;/html></code></pre></div>\n<p>服务器回应的时候，必须告诉客户端，数据是什么格式，这就是Content-Type字段的作用。\nContent-Type字段的值的数据类型总称为MIME type，每个值包括一级类型和二级类型，之间用斜杠分隔。\nMIME type还可以在尾部使用分号，添加参数</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    Content-Type: text/html; charset=utf-8</code></pre></div>\n<p>客户端请求的时候，也可以使用Accept字段声明自己可以接受哪些数据格式。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    Accept: */*</code></pre></div>\n<h2>HTTP之状态码</h2>\n<p>状态代码有三位数字组成，第一个数字定义了响应的类别，共分五种类别:</p>\n<ul>\n<li>1xx：指示信息—表示请求已接收，继续处理</li>\n<li>2xx：成功—表示请求已被成功接收、理解、接受</li>\n<li>3xx：重定向—要完成请求必须进行更进一步的操作</li>\n<li>4xx：客户端错误—请求有语法错误或请求无法实现</li>\n<li>5xx：服务器端错误—服务器未能实现合法的请求</li>\n</ul>\n<h2>HTTP工作原理</h2>\n<p>HTTP协议定义Web客户端如何从Web服务器请求Web页面，以及服务器如何把Web页面传送给客户端。HTTP协议采用了请求/响应模型。客户端向服务器发送一个请求报文，请求报文包含请求的方法、URL、协议版本、请求头部和请求数据。服务器以一个状态行作为响应，响应的内容包括协议的版本、成功或者错误代码、服务器信息、响应头部和响应数据。</p>\n<p>以下是 HTTP 请求/响应的步骤：</p>\n<ol>\n<li>客户端连接到Web服务器</li>\n</ol>\n<p>一个HTTP客户端，通常是浏览器，与Web服务器的HTTP端口（默认为80）建立一个TCP套接字连接。例如，<a href=\"http://www.oakcms.cn%E3%80%82\">http://www.oakcms.cn。</a></p>\n<ol start=\"2\">\n<li>发送HTTP请求</li>\n</ol>\n<p>通过TCP套接字，客户端向Web服务器发送一个文本的请求报文，一个请求报文由请求行、请求头部、空行和请求数据4部分组成。</p>\n<ol start=\"3\">\n<li>服务器接受请求并返回HTTP响应</li>\n</ol>\n<p>Web服务器解析请求，定位请求资源。服务器将资源复本写到TCP套接字，由客户端读取。一个响应由状态行、响应头部、空行和响应数据4部分组成。</p>\n<ol start=\"4\">\n<li>释放连接TCP连接</li>\n</ol>\n<p>若connection 模式为close，则服务器主动关闭TCP连接，客户端被动关闭连接，释放TCP连接;若connection 模式为keepalive，则该连接会保持一段时间，在该时间内可以继续接收请求;</p>\n<ol start=\"5\">\n<li>客户端浏览器解析HTML内容</li>\n</ol>\n<p>客户端浏览器首先解析状态行，查看表明请求是否成功的状态代码。然后解析每一个响应头，响应头告知以下为若干字节的HTML文档和文档的字符集。客户端浏览器读取响应数据HTML，根据HTML的语法对其进行格式化，并在浏览器窗口中显示。</p>\n<p>例如：在浏览器地址栏键入URL，按下回车之后会经历以下流程：</p>\n<ol>\n<li>\n<p>浏览器向 DNS 服务器请求解析该 URL 中的域名所对应的 IP 地址;</p>\n</li>\n<li>\n<p>解析出 IP 地址后，根据该 IP 地址和默认端口 80，和服务器建立TCP连接;</p>\n</li>\n<li>\n<p>浏览器发出读取文件(URL 中域名后面部分对应的文件)的HTTP 请求，该请求报文作为 TCP 三次握手的第三个报文的数据发送给服务器;</p>\n</li>\n<li>\n<p>服务器对浏览器请求作出响应，并把对应的 html 文本发送给浏览器;</p>\n</li>\n<li>\n<p>释放 TCP连接;</p>\n</li>\n<li>\n<p>浏览器将该 html 文本并显示内容;</p>\n</li>\n</ol>\n<h2>GET和POST请求的区别</h2>\n<ul>\n<li>\n<p>GET提交的数据会放在URL之后，以?分割URL和传输数据，参数之间以&#x26;相连，如EditPosts.aspx?name=test1&#x26;id=123456. POST方法是把提交的数据放在HTTP包的Body中.</p>\n</li>\n<li>\n<p>GET提交的数据大小有限制（因为浏览器对URL的长度有限制），而POST方法提交的数据没有限制.</p>\n</li>\n<li>\n<p>GET方式需要使用Request.QueryString来取得变量的值，而POST方式通过Request.Form来获取变量的值。</p>\n</li>\n<li>\n<p>GET方式提交数据，会带来安全问题，比如一个登录页面，通过GET方式提交数据时，用户名和密码将出现在URL上，如果页面可以被缓存或者其他人可以访问这台机器，就可以从历史记录获得该用户的账号和密码.</p>\n</li>\n</ul>","frontmatter":{"title":"HTTP 协议","date":"June 01, 2020","description":""}},"previous":{"fields":{"slug":"/github-actions/"},"frontmatter":{"title":"Github Actions 使用"}},"next":{"fields":{"slug":"/javaScript-types/"},"frontmatter":{"title":"javaScript 数据类型"}}},"pageContext":{"id":"d521b323-da89-5f25-b6be-db70e9a28458","previousPostId":"15ee774d-7650-56bb-8bde-b6d8042d9b07","nextPostId":"d9067b37-65af-5820-87ec-3e6b6c2eeae3"}},"staticQueryHashes":["2841359383","3257411868"]}